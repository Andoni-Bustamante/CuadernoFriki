(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{857:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(7515),l=r(5155);let a=(0,i.A)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},1304:(e,t,r)=>{"use strict";r.d(t,{db:()=>s,j:()=>n});var i=r(3915),l=r(5317),a=r(6203);let o=(0,i.Wp)({apiKey:"AIzaSyAYVQnRZZuvcCIjGvNbvspKstLjpXCRhfw",authDomain:"cuadernofriki.firebaseapp.com",projectId:"cuadernofriki",storageBucket:"cuadernofriki.firebasestorage.app",messagingSenderId:"1068489135368",appId:"1:1068489135368:web:d7dac2089943ec2d3288bd"}),s=(0,l.aU)(o),n=(0,a.xI)(o)},2531:(e,t,r)=>{Promise.resolve().then(r.bind(r,8292))},3010:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var i=r(2115),l=r(2596),a=r(7472),o=r(7582),s=r(3209),n=r(5170),d=r(306);function c(e){return(0,d.Ay)("MuiFab",e)}let u=(0,n.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var m=r(9287),h=r(955),x=r(680),b=r(8963),g=r(2204),p=r(5155);let f=e=>{let{color:t,variant:r,classes:i,size:l}=e,o={root:["root",r,"size".concat((0,s.A)(l)),"inherit"===t?"colorInherit":t]},n=(0,a.A)(o,c,i);return{...i,...n}},v=(0,h.Ay)(o.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,m.A)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["size".concat((0,s.A)(r.size))],"inherit"===r.color&&t.colorInherit,t[(0,s.A)(r.size)],t[r.color]]}})((0,x.A)(e=>{var t,r;let{theme:i}=e;return{...i.typography.button,minHeight:36,transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(i.vars||i).zIndex.fab,boxShadow:(i.vars||i).shadows[6],"&:active":{boxShadow:(i.vars||i).shadows[12]},color:i.vars?i.vars.palette.grey[900]:null==(t=(r=i.palette).getContrastText)?void 0:t.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],"&:hover":{backgroundColor:(i.vars||i).palette.grey.A100,"@media (hover: none)":{backgroundColor:(i.vars||i).palette.grey[300]},textDecoration:"none"},["&.".concat(u.focusVisible)]:{boxShadow:(i.vars||i).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),(0,x.A)(e=>{let{theme:t}=e;return{variants:[...Object.entries(t.palette).filter((0,b.A)(["dark","contrastText"])).map(e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].contrastText,backgroundColor:(t.vars||t).palette[r].main,"&:hover":{backgroundColor:(t.vars||t).palette[r].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[r].main}}}}})]}}),(0,x.A)(e=>{let{theme:t}=e;return{["&.".concat(u.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),w=i.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiFab"}),{children:i,className:a,color:o="default",component:s="button",disabled:n=!1,disableFocusRipple:d=!1,focusVisibleClassName:c,size:u="large",variant:m="circular",...h}=r,x={...r,color:o,component:s,disabled:n,disableFocusRipple:d,size:u,variant:m},b=f(x);return(0,p.jsx)(v,{className:(0,l.A)(b.root,a),component:s,disabled:n,focusRipple:!d,focusVisibleClassName:(0,l.A)(b.focusVisible,c),ownerState:x,ref:t,...h,classes:b,children:i})})},7596:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(5695),l=r(2115);let a=()=>{let e=(0,i.useRouter)();(0,l.useEffect)(()=>{localStorage.getItem("uid")||e.push("/login")},[e])}},7811:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var i=r(5155),l=r(5317),a=r(1304),o=r(9521),s=r(8464),n=r(5712);function d(e){let{id:t,Nombre:r,Episodio:d,Imagen:c,Dia:u,onEdit:m,onUpdateEpisode:h}=e,x=async e=>{try{let r=(0,l.H9)(a.db,"Animes",t);await (0,l.mZ)(r,{Episodio:e}),console.log("Episodio actualizado a ".concat(e)),h(t,e)}catch(e){console.error("Error al actualizar el episodio:",e)}};return(0,i.jsxs)("div",{className:"border border-stone-400 rounded-lg p-4 shadow-md flex flex-col items-center bg-blue-900 text-white w-full sm:w-64",children:[(0,i.jsx)("div",{className:"w-full h-80 sm:h-80 flex justify-center items-center overflow-hidden",children:(0,i.jsx)("img",{src:c||"../animeDefault.png",alt:r,className:"border border-stone-400 rounded-lg object-cover w-full h-full"})}),(0,i.jsx)("h3",{className:"text-lg sm:text-xl font-bold mt-4 text-center cursor-pointer hover:text-blue-300 truncate w-full",onClick:m,title:r,children:r}),(0,i.jsx)("p",{className:"text-lg sm:text-xl text-gray-300 text-center mt-2",children:d}),(0,i.jsxs)("div",{className:"flex gap-2 sm:gap-4 mt-4",children:[(0,i.jsx)(o.A,{onClick:()=>x(d-1),color:"primary",size:"large",children:(0,i.jsx)(s.A,{fontSize:"inherit"})}),(0,i.jsx)(o.A,{onClick:()=>x(d+1),color:"primary",size:"large",children:(0,i.jsx)(n.A,{fontSize:"inherit"})})]})]})}},8292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var i=r(5155),l=r(2115),a=r(5317),o=r(1304),s=r(7811),n=r(4752),d=r.n(n);function c(e){let{isOpen:t,onClose:r,onSubmit:s,onDelete:n,initialData:c}=e,[u,m]=(0,l.useState)((null==c?void 0:c.Nombre)||""),[h,x]=(0,l.useState)((null==c?void 0:c.Episodio)||0),[b,g]=(0,l.useState)((null==c?void 0:c.Imagen)||""),[p,f]=(0,l.useState)((null==c?void 0:c.Dia)||""),[v,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c?(m(c.Nombre),x(c.Episodio),g(c.Imagen||""),f(c.Dia)):(m(""),x(0),g(""),f(""))},[c]),(0,l.useEffect)(()=>{if(b){let e=new Image;e.src=b,e.onload=()=>w(!0),e.onerror=()=>w(!1)}else w(!1)},[b]);let j=async()=>{if((await d().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",color:"#fff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",background:"#2b2b2b"})).isConfirmed)try{let e=(0,a.H9)(o.db,"Animes",(null==c?void 0:c.id)||"");await (0,a.kd)(e),d().fire("\xa1Eliminado!","El anime ha sido eliminado correctamente.","success"),n((null==c?void 0:c.id)||""),r()}catch(e){console.error("Error al eliminar el anime:",e),d().fire("Error","Hubo un problema al eliminar el anime.","error")}};return t?(0,i.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50",children:(0,i.jsxs)("div",{className:"bg-blue-900 text-white p-6 rounded shadow-lg w-full max-w-lg sm:max-w-xl md:max-w-2xl relative flex flex-col sm:flex-row",children:[(0,i.jsx)("button",{onClick:r,className:"absolute top-2 right-2 text-gray-400 hover:text-white",children:"âœ•"}),(0,i.jsxs)("div",{className:"w-full sm:w-2/3 pr-0 sm:pr-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4 text-center sm:text-left",children:c?"Editar Anime":"Crear Anime"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s({id:null==c?void 0:c.id,Nombre:u,Episodio:h,Imagen:b,Dia:p}),m(""),x(0),g(""),f("")},children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium mb-2",children:"Nombre"}),(0,i.jsx)("input",{type:"text",id:"nombre",value:u,onChange:e=>m(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"episodio",className:"block text-sm font-medium mb-2",children:"Episodio"}),(0,i.jsx)("input",{type:"number",id:"episodio",value:h,onChange:e=>x(Number(e.target.value)),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"imagen",className:"block text-sm font-medium mb-2",children:"Imagen (URL)"}),(0,i.jsx)("input",{type:"text",id:"imagen",value:b,onChange:e=>g(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),!v&&b&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2",children:"La URL de la imagen no es v\xe1lida."})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"dia",className:"block text-sm font-medium mb-2",children:"D\xeda"}),(0,i.jsxs)("select",{id:"dia",value:p,onChange:e=>f(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Selecciona un d\xeda"}),(0,i.jsx)("option",{value:"Lunes",children:"Lunes"}),(0,i.jsx)("option",{value:"Martes",children:"Martes"}),(0,i.jsx)("option",{value:"Mi\xe9rcoles",children:"Mi\xe9rcoles"}),(0,i.jsx)("option",{value:"Jueves",children:"Jueves"}),(0,i.jsx)("option",{value:"Viernes",children:"Viernes"}),(0,i.jsx)("option",{value:"S\xe1bado",children:"S\xe1bado"}),(0,i.jsx)("option",{value:"Domingo",children:"Domingo"})]})]}),(0,i.jsx)("button",{type:"submit",className:"w-full bg-blue-700 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:c?"Guardar Cambios":"Crear"})]}),c&&(0,i.jsx)("button",{onClick:j,className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded mt-4",children:"Eliminar"})]}),v&&(0,i.jsx)("div",{className:"hidden sm:flex w-full sm:w-1/3 justify-center items-center mb-11 ml-5",children:(0,i.jsx)("div",{className:"border rounded-lg shadow-md text-white w-70 h-70",children:(0,i.jsx)("div",{className:"w-full h-full flex justify-center items-center overflow-hidden",children:(0,i.jsx)("img",{src:b,alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full rounded-lg"})})})}),!v&&(0,i.jsx)("div",{className:"hidden sm:flex w-full sm:w-1/3 justify-center items-center mt-4",children:(0,i.jsx)("div",{className:"border rounded-lg shadow-md text-white w-70 h-72",children:(0,i.jsx)("div",{className:"w-full h-full flex justify-center items-center overflow-hidden",children:(0,i.jsx)("img",{src:"../animeDefault.png",alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full rounded-lg"})})})})]})}):null}var u=r(7596),m=r(3010),h=r(857);function x(){(0,u.A)();let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(!1),[d,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("uid");if(!e)return console.error("No hay UID en localStorage");try{let r=(0,a.P)((0,a.rJ)(o.db,"Animes"),(0,a._M)("User","==",e)),i=(await (0,a.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));t(i)}catch(e){console.error("Error al obtener los animes:",e)}})()},[]);let b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;x(e),n(!0)},g=()=>{x(null),n(!1)},p=async e=>{let r=localStorage.getItem("uid");if(!r)return void console.error("No hay UID en localStorage");try{if(e.id){let t=(0,a.H9)(o.db,"Animes",e.id);await (0,a.mZ)(t,{Nombre:e.Nombre,Episodio:e.Episodio,Imagen:e.Imagen,Dia:e.Dia}),console.log("Anime actualizado correctamente")}else await (0,a.gS)((0,a.rJ)(o.db,"Animes"),{Nombre:e.Nombre,Episodio:e.Episodio,Imagen:e.Imagen,Dia:e.Dia,User:r}),console.log("Anime creado correctamente");let i=(0,a.P)((0,a.rJ)(o.db,"Animes"),(0,a._M)("User","==",r)),l=(await (0,a.GG)(i)).docs.map(e=>({id:e.id,...e.data()}));t(l),g()}catch(e){console.error("Error al guardar el anime:",e)}},f=(e,r)=>{t(t=>t.map(t=>t.id===e?{...t,Episodio:r}:t))},v=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo","Sin d\xeda"],w=e.reduce((e,t)=>{let r=t.Dia||"Sin d\xeda";return e[r]||(e[r]=[]),e[r].push(t),e},{}),j=Object.keys(w).sort((e,t)=>v.indexOf(e)-v.indexOf(t));return(0,i.jsxs)("div",{className:"p-5 relative",children:[(0,i.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 text-center sm:text-left",children:"Animes"}),(0,i.jsx)("div",{className:"border-b-2 border-gray-500 mb-6"}),0===e.length?(0,i.jsx)("p",{className:"text-center text-gray-400 text-xl",children:"Sin registros"}):j.map(e=>(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:e}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:w[e].map(e=>(0,i.jsx)(s.A,{id:e.id,Nombre:e.Nombre,Episodio:e.Episodio,Imagen:e.Imagen,Dia:e.Dia,onEdit:()=>b(e),onUpdateEpisode:f},e.id))})]},e)),(0,i.jsx)(m.A,{color:"primary","aria-label":"add",onClick:()=>b(null),style:{position:"fixed",bottom:"20px",right:"20px"},children:(0,i.jsx)(h.A,{})}),(0,i.jsx)(c,{isOpen:r,onClose:g,onSubmit:p,onDelete:e=>{t(t=>t.filter(t=>t.id!==e))},initialData:d})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,118,320,708,515,807,441,684,358],()=>t(2531)),_N_E=e.O()}]);
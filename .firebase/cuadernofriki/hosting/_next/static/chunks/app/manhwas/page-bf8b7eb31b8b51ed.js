(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{857:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var l=a(7515),r=a(5155);let o=(0,l.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},1304:(e,t,a)=>{"use strict";a.d(t,{db:()=>i,j:()=>n});var l=a(3915),r=a(5317),o=a(6203);let s=(0,l.Wp)({apiKey:"AIzaSyAYVQnRZZuvcCIjGvNbvspKstLjpXCRhfw",authDomain:"cuadernofriki.firebaseapp.com",projectId:"cuadernofriki",storageBucket:"cuadernofriki.firebasestorage.app",messagingSenderId:"1068489135368",appId:"1:1068489135368:web:d7dac2089943ec2d3288bd"}),i=(0,r.aU)(s),n=(0,o.xI)(s)},3010:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var l=a(2115),r=a(2596),o=a(7472),s=a(7582),i=a(3209),n=a(5170),d=a(306);function c(e){return(0,d.Ay)("MuiFab",e)}let u=(0,n.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var m=a(9287),h=a(955),x=a(680),b=a(8963),g=a(2204),p=a(5155);let f=e=>{let{color:t,variant:a,classes:l,size:r}=e,s={root:["root",a,"size".concat((0,i.A)(r)),"inherit"===t?"colorInherit":t]},n=(0,o.A)(s,c,l);return{...l,...n}},v=(0,h.Ay)(s.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,m.A)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],t["size".concat((0,i.A)(a.size))],"inherit"===a.color&&t.colorInherit,t[(0,i.A)(a.size)],t[a.color]]}})((0,x.A)(e=>{var t,a;let{theme:l}=e;return{...l.typography.button,minHeight:36,transition:l.transitions.create(["background-color","box-shadow","border-color"],{duration:l.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(l.vars||l).zIndex.fab,boxShadow:(l.vars||l).shadows[6],"&:active":{boxShadow:(l.vars||l).shadows[12]},color:l.vars?l.vars.palette.grey[900]:null==(t=(a=l.palette).getContrastText)?void 0:t.call(a,l.palette.grey[300]),backgroundColor:(l.vars||l).palette.grey[300],"&:hover":{backgroundColor:(l.vars||l).palette.grey.A100,"@media (hover: none)":{backgroundColor:(l.vars||l).palette.grey[300]},textDecoration:"none"},["&.".concat(u.focusVisible)]:{boxShadow:(l.vars||l).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),(0,x.A)(e=>{let{theme:t}=e;return{variants:[...Object.entries(t.palette).filter((0,b.A)(["dark","contrastText"])).map(e=>{let[a]=e;return{props:{color:a},style:{color:(t.vars||t).palette[a].contrastText,backgroundColor:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:(t.vars||t).palette[a].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a].main}}}}})]}}),(0,x.A)(e=>{let{theme:t}=e;return{["&.".concat(u.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),w=l.forwardRef(function(e,t){let a=(0,g.b)({props:e,name:"MuiFab"}),{children:l,className:o,color:s="default",component:i="button",disabled:n=!1,disableFocusRipple:d=!1,focusVisibleClassName:c,size:u="large",variant:m="circular",...h}=a,x={...a,color:s,component:i,disabled:n,disableFocusRipple:d,size:u,variant:m},b=f(x);return(0,p.jsx)(v,{className:(0,r.A)(b.root,o),component:i,disabled:n,focusRipple:!d,focusVisibleClassName:(0,r.A)(b.focusVisible,c),ownerState:x,ref:t,...h,classes:b,children:l})})},3713:(e,t,a)=>{Promise.resolve().then(a.bind(a,6693))},4509:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var l=a(5155),r=a(5317),o=a(1304),s=a(9521),i=a(8464),n=a(5712);function d(e){let{id:t,Nombre:a,Capitulo:d,Imagen:c,Dia:u,onEdit:m,onUpdateChapter:h}=e,x=async e=>{try{let a=(0,r.H9)(o.db,"Manhwas",t);await (0,r.mZ)(a,{Capitulo:e}),console.log("Cap\xedtulo actualizado a ".concat(e)),h(t,e)}catch(e){console.error("Error al actualizar el cap\xedtulo:",e)}};return(0,l.jsxs)("div",{className:"border border-stone-400 rounded-lg p-4 shadow-md flex flex-col items-center bg-blue-900 text-white w-full sm:w-64",children:[(0,l.jsx)("div",{className:"w-full h-80 sm:h-80 flex justify-center items-center overflow-hidden",children:(0,l.jsx)("img",{src:c||"../default.png",alt:a,className:"border border-stone-400 rounded-lg object-cover w-full h-full"})}),(0,l.jsx)("h3",{className:"text-lg sm:text-xl font-bold mt-4 text-center cursor-pointer hover:text-blue-300 truncate w-full",onClick:m,title:a,children:a}),(0,l.jsx)("p",{className:"text-lg sm:text-xl text-gray-300 text-center mt-2",children:d}),(0,l.jsxs)("div",{className:"flex gap-2 sm:gap-4 mt-4",children:[(0,l.jsx)(s.A,{onClick:()=>x(d-1),color:"primary",size:"large",children:(0,l.jsx)(i.A,{fontSize:"inherit"})}),(0,l.jsx)(s.A,{onClick:()=>x(d+1),color:"primary",size:"large",children:(0,l.jsx)(n.A,{fontSize:"inherit"})})]})]})}},6693:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var l=a(5155),r=a(2115),o=a(5317),s=a(1304),i=a(4509),n=a(4752),d=a.n(n);function c(e){let{isOpen:t,onClose:a,onSubmit:i,onDelete:n,initialData:c}=e,[u,m]=(0,r.useState)((null==c?void 0:c.Nombre)||""),[h,x]=(0,r.useState)((null==c?void 0:c.Capitulo)||0),[b,g]=(0,r.useState)((null==c?void 0:c.Imagen)||""),[p,f]=(0,r.useState)((null==c?void 0:c.Dia)||""),[v,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c?(m(c.Nombre),x(c.Capitulo),g(c.Imagen||""),f(c.Dia)):(m(""),x(0),g(""),f(""))},[c]),(0,r.useEffect)(()=>{if(b){let e=new Image;e.src=b,e.onload=()=>w(!0),e.onerror=()=>w(!1)}else w(!1)},[b]);let j=async()=>{if((await d().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",color:"#fff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",background:"#2b2b2b"})).isConfirmed)try{let e=(0,o.H9)(s.db,"Manhwas",(null==c?void 0:c.id)||"");await (0,o.kd)(e),d().fire("\xa1Eliminado!","El manhwa ha sido eliminado correctamente.","success"),n((null==c?void 0:c.id)||""),a()}catch(e){console.error("Error al eliminar el manhwa:",e),d().fire("Error","Hubo un problema al eliminar el manhwa.","error")}};return t?(0,l.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50",children:(0,l.jsxs)("div",{className:"bg-blue-900 text-white p-6 rounded shadow-lg w-full max-w-lg sm:max-w-xl md:max-w-2xl relative flex flex-col sm:flex-row",children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-2 right-2 text-gray-400 hover:text-white",children:"âœ•"}),(0,l.jsxs)("div",{className:"w-full sm:w-2/3 pr-0 sm:pr-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4 text-center sm:text-left",children:c?"Editar Manhwa":"Crear Manhwa"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({id:null==c?void 0:c.id,Nombre:u,Capitulo:h,Imagen:b,Dia:p}),m(""),x(0),g(""),f("")},children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium mb-2",children:"Nombre"}),(0,l.jsx)("input",{type:"text",id:"nombre",value:u,onChange:e=>m(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"capitulo",className:"block text-sm font-medium mb-2",children:"Cap\xedtulo"}),(0,l.jsx)("input",{type:"number",id:"capitulo",value:h,onChange:e=>x(Number(e.target.value)),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"imagen",className:"block text-sm font-medium mb-2",children:"Imagen (URL)"}),(0,l.jsx)("input",{type:"text",id:"imagen",value:b,onChange:e=>g(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),!v&&b&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-2",children:"La URL de la imagen no es v\xe1lida."})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"dia",className:"block text-sm font-medium mb-2",children:"D\xeda"}),(0,l.jsxs)("select",{id:"dia",value:p,onChange:e=>f(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Selecciona un d\xeda"}),(0,l.jsx)("option",{value:"Lunes",children:"Lunes"}),(0,l.jsx)("option",{value:"Martes",children:"Martes"}),(0,l.jsx)("option",{value:"Mi\xe9rcoles",children:"Mi\xe9rcoles"}),(0,l.jsx)("option",{value:"Jueves",children:"Jueves"}),(0,l.jsx)("option",{value:"Viernes",children:"Viernes"}),(0,l.jsx)("option",{value:"S\xe1bado",children:"S\xe1bado"}),(0,l.jsx)("option",{value:"Domingo",children:"Domingo"})]})]}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-700 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:c?"Guardar Cambios":"Crear"})]}),c&&(0,l.jsx)("button",{onClick:j,className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded mt-4",children:"Eliminar"})]}),v&&(0,l.jsx)("div",{className:"hidden sm:flex w-full sm:w-1/3 justify-center items-center mb-11 ml-5",children:(0,l.jsx)("div",{className:"border rounded-lg shadow-md text-white w-70 h-70",children:(0,l.jsx)("div",{className:"w-full h-full flex justify-center items-center overflow-hidden",children:(0,l.jsx)("img",{src:b,alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full rounded-lg"})})})}),!v&&(0,l.jsx)("div",{className:"hidden sm:flex w-full sm:w-1/3 justify-center items-center mt-4",children:(0,l.jsx)("div",{className:"border rounded-lg shadow-md text-white w-70 h-72",children:(0,l.jsx)("div",{className:"w-full h-full flex justify-center items-center overflow-hidden",children:(0,l.jsx)("img",{src:"../default.png",alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full rounded-lg"})})})})]})}):null}var u=a(7596),m=a(3010),h=a(857);function x(){(0,u.A)();let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[d,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("uid");if(!e)return console.error("No hay UID en localStorage");try{let a=(0,o.P)((0,o.rJ)(s.db,"Manhwas"),(0,o._M)("User","==",e)),l=(await (0,o.GG)(a)).docs.map(e=>({id:e.id,...e.data()}));t(l)}catch(e){console.error("Error al obtener los manhwas:",e)}})()},[]);let b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;x(e),n(!0)},g=()=>{x(null),n(!1)},p=async e=>{let a=localStorage.getItem("uid");if(!a)return void console.error("No hay UID en localStorage");try{if(e.id){let t=(0,o.H9)(s.db,"Manhwas",e.id);await (0,o.mZ)(t,{Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia}),console.log("Manhwa actualizado correctamente")}else await (0,o.gS)((0,o.rJ)(s.db,"Manhwas"),{Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia,User:a}),console.log("Manhwa creado correctamente");let l=(0,o.P)((0,o.rJ)(s.db,"Manhwas"),(0,o._M)("User","==",a)),r=(await (0,o.GG)(l)).docs.map(e=>({id:e.id,...e.data()}));t(r),g()}catch(e){console.error("Error al guardar el manhwa:",e)}},f=(e,a)=>{t(t=>t.map(t=>t.id===e?{...t,Capitulo:a}:t))},v=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo","Sin d\xeda"],w=e.reduce((e,t)=>{let a=t.Dia||"Sin d\xeda";return e[a]||(e[a]=[]),e[a].push(t),e},{}),j=Object.keys(w).sort((e,t)=>v.indexOf(e)-v.indexOf(t));return(0,l.jsxs)("div",{className:"p-5 relative",children:[(0,l.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 text-center sm:text-left",children:"Manhwas"}),(0,l.jsx)("div",{className:"border-b-2 border-gray-500 mb-6"}),0===e.length?(0,l.jsx)("p",{className:"text-center text-gray-400 text-xl",children:"Sin registros"}):j.map(e=>(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:e}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:w[e].map(e=>(0,l.jsx)(i.A,{id:e.id,Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia,onEdit:()=>b(e),onUpdateChapter:f},e.id))})]},e)),(0,l.jsx)(m.A,{color:"primary","aria-label":"add",onClick:()=>b(null),style:{position:"fixed",bottom:"20px",right:"20px"},children:(0,l.jsx)(h.A,{})}),(0,l.jsx)(c,{isOpen:a,onClose:g,onSubmit:p,onDelete:e=>{t(t=>t.filter(t=>t.id!==e))},initialData:d})]})}},7596:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var l=a(5695),r=a(2115);let o=()=>{let e=(0,l.useRouter)();(0,r.useEffect)(()=>{localStorage.getItem("uid")||e.push("/login")},[e])}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,118,320,708,515,807,441,684,358],()=>t(3713)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{1304:(e,a,t)=>{"use strict";t.d(a,{db:()=>o,j:()=>n});var l=t(3915),s=t(5317),r=t(6203);let i=(0,l.Wp)({apiKey:"AIzaSyAYVQnRZZuvcCIjGvNbvspKstLjpXCRhfw",authDomain:"cuadernofriki.firebaseapp.com",projectId:"cuadernofriki",storageBucket:"cuadernofriki.firebasestorage.app",messagingSenderId:"1068489135368",appId:"1:1068489135368:web:d7dac2089943ec2d3288bd"}),o=(0,s.aU)(i),n=(0,r.xI)(i)},3713:(e,a,t)=>{Promise.resolve().then(t.bind(t,6693))},4509:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var l=t(5155),s=t(5317),r=t(1304);function i(e){let{id:a,Nombre:t,Capitulo:i,Imagen:o,Dia:n,onEdit:c,onUpdateChapter:d}=e,u=async e=>{try{let t=(0,s.H9)(r.db,"Manhwas",a);await (0,s.mZ)(t,{Capitulo:e}),console.log("Cap\xedtulo actualizado a ".concat(e)),d(a,e)}catch(e){console.error("Error al actualizar el cap\xedtulo:",e)}};return(0,l.jsxs)("div",{className:"border rounded-lg p-4 shadow-md flex flex-col items-center bg-gray-800 text-white w-full sm:w-64",children:[(0,l.jsx)("div",{className:"w-full h-80 sm:h-80 flex justify-center items-center overflow-hidden",children:(0,l.jsx)("img",{src:o||"../default.png",alt:t,className:"object-cover w-full h-full"})}),(0,l.jsx)("h3",{className:"text-lg sm:text-xl font-bold mt-4 text-center cursor-pointer hover:text-orange-500 truncate w-full",onClick:c,title:t,children:t}),(0,l.jsx)("p",{className:"text-lg sm:text-xl text-gray-400 text-center mt-2",children:i}),(0,l.jsxs)("div",{className:"flex gap-2 sm:gap-4 mt-4",children:[(0,l.jsx)("button",{onClick:()=>u(i-1),className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xl sm:text-2xl",children:"←"}),(0,l.jsx)("button",{onClick:()=>u(i+1),className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xl sm:text-2xl",children:"→"})]})]})}},6693:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var l=t(5155),s=t(2115),r=t(5317),i=t(1304),o=t(4509),n=t(4752),c=t.n(n);function d(e){let{isOpen:a,onClose:t,onSubmit:o,onDelete:n,initialData:d}=e,[u,m]=(0,s.useState)((null==d?void 0:d.Nombre)||""),[x,h]=(0,s.useState)((null==d?void 0:d.Capitulo)||0),[b,g]=(0,s.useState)((null==d?void 0:d.Imagen)||""),[f,p]=(0,s.useState)((null==d?void 0:d.Dia)||""),[v,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{d?(m(d.Nombre),h(d.Capitulo),g(d.Imagen||""),p(d.Dia)):(m(""),h(0),g(""),p(""))},[d]),(0,s.useEffect)(()=>{if(b){let e=new Image;e.src=b,e.onload=()=>w(!0),e.onerror=()=>w(!1)}else w(!1)},[b]);let j=async()=>{if((await c().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",color:"#fff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",background:"#2b2b2b"})).isConfirmed)try{let e=(0,r.H9)(i.db,"Manhwas",(null==d?void 0:d.id)||"");await (0,r.kd)(e),c().fire("\xa1Eliminado!","El manhwa ha sido eliminado correctamente.","success"),n((null==d?void 0:d.id)||""),t()}catch(e){console.error("Error al eliminar el manhwa:",e),c().fire("Error","Hubo un problema al eliminar el manhwa.","error")}};return a?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,l.jsxs)("div",{className:"bg-gray-800 text-white p-6 rounded shadow-lg w-[600px] relative flex",children:[(0,l.jsx)("button",{onClick:t,className:"absolute top-2 right-2 text-gray-400 hover:text-white",children:"✕"}),(0,l.jsxs)("div",{className:"w-2/3 pr-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:d?"Editar Manhwa":"Crear Manhwa"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o({id:null==d?void 0:d.id,Nombre:u,Capitulo:x,Imagen:b,Dia:f})},children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium mb-2",children:"Nombre"}),(0,l.jsx)("input",{type:"text",id:"nombre",value:u,onChange:e=>m(e.target.value),className:"w-full p-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"capitulo",className:"block text-sm font-medium mb-2",children:"Cap\xedtulo"}),(0,l.jsx)("input",{type:"number",id:"capitulo",value:x,onChange:e=>h(Number(e.target.value)),className:"w-full p-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"imagen",className:"block text-sm font-medium mb-2",children:"Imagen (URL)"}),(0,l.jsx)("input",{type:"text",id:"imagen",value:b,onChange:e=>g(e.target.value),className:"w-full p-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),!v&&b&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-2",children:"La URL de la imagen no es v\xe1lida."})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"dia",className:"block text-sm font-medium mb-2",children:"D\xeda"}),(0,l.jsxs)("select",{id:"dia",value:f,onChange:e=>p(e.target.value),className:"w-full p-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Selecciona un d\xeda"}),(0,l.jsx)("option",{value:"Lunes",children:"Lunes"}),(0,l.jsx)("option",{value:"Martes",children:"Martes"}),(0,l.jsx)("option",{value:"Mi\xe9rcoles",children:"Mi\xe9rcoles"}),(0,l.jsx)("option",{value:"Jueves",children:"Jueves"}),(0,l.jsx)("option",{value:"Viernes",children:"Viernes"}),(0,l.jsx)("option",{value:"S\xe1bado",children:"S\xe1bado"}),(0,l.jsx)("option",{value:"Domingo",children:"Domingo"})]})]}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:d?"Guardar Cambios":"Crear"})]}),d&&(0,l.jsx)("button",{onClick:j,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded mt-4",children:"Eliminar"})]}),v&&(0,l.jsx)("div",{className:"w-1/3 flex justify-center items-center",children:(0,l.jsx)("div",{className:"border rounded-lg p-4 shadow-md bg-gray-800 text-white w-64",children:(0,l.jsx)("div",{className:"w-full h-56 flex justify-center items-center overflow-hidden",children:(0,l.jsx)("img",{src:b,alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full"})})})})]})}):null}var u=t(7596),m=t(4967),x=t(857);function h(){(0,u.A)();let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!1),[c,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("uid");if(!e)return console.error("No hay UID en localStorage");try{let t=(0,r.P)((0,r.rJ)(i.db,"Manhwas"),(0,r._M)("User","==",e)),l=(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));a(l)}catch(e){console.error("Error al obtener los manhwas:",e)}})()},[]);let b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;h(e),n(!0)},g=()=>{h(null),n(!1)},f=async e=>{let t=localStorage.getItem("uid");if(!t)return void console.error("No hay UID en localStorage");try{if(e.id){let a=(0,r.H9)(i.db,"Manhwas",e.id);await (0,r.mZ)(a,{Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia}),console.log("Manhwa actualizado correctamente")}else await (0,r.gS)((0,r.rJ)(i.db,"Manhwas"),{Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia,User:t}),console.log("Manhwa creado correctamente");let l=(0,r.P)((0,r.rJ)(i.db,"Manhwas"),(0,r._M)("User","==",t)),s=(await (0,r.GG)(l)).docs.map(e=>({id:e.id,...e.data()}));a(s),g()}catch(e){console.error("Error al guardar el manhwa:",e)}},p=(e,t)=>{a(a=>a.map(a=>a.id===e?{...a,Capitulo:t}:a))},v=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo","Sin d\xeda"],w=e.reduce((e,a)=>{let t=a.Dia||"Sin d\xeda";return e[t]||(e[t]=[]),e[t].push(a),e},{}),j=Object.keys(w).sort((e,a)=>v.indexOf(e)-v.indexOf(a));return(0,l.jsxs)("div",{className:"p-5 relative",children:[(0,l.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 text-center sm:text-left",children:"Manhwas"}),(0,l.jsx)("div",{className:"border-b-2 border-gray-600 mb-6"}),j.map(e=>(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-orange-500 mb-4",children:e}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:w[e].map(e=>(0,l.jsx)(o.A,{id:e.id,Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia,onEdit:()=>b(e),onUpdateChapter:p},e.id))})]},e)),(0,l.jsx)(m.A,{color:"primary","aria-label":"add",onClick:()=>b(null),style:{position:"fixed",bottom:"20px",right:"20px"},children:(0,l.jsx)(x.A,{})}),(0,l.jsx)(d,{isOpen:t,onClose:g,onSubmit:f,onDelete:e=>{a(a=>a.filter(a=>a.id!==e))},initialData:c})]})}},7596:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var l=t(5695),s=t(2115);let r=()=>{let e=(0,l.useRouter)();(0,s.useEffect)(()=>{localStorage.getItem("uid")||e.push("/login")},[e])}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,118,320,708,515,919,441,684,358],()=>a(3713)),_N_E=e.O()}]);
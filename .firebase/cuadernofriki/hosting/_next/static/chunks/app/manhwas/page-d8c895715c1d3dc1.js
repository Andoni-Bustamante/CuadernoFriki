(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{1304:(e,t,a)=>{"use strict";a.d(t,{db:()=>s,j:()=>n});var r=a(3915),l=a(5317),o=a(6203);let i=(0,r.Wp)({apiKey:"AIzaSyAYVQnRZZuvcCIjGvNbvspKstLjpXCRhfw",authDomain:"cuadernofriki.firebaseapp.com",projectId:"cuadernofriki",storageBucket:"cuadernofriki.firebasestorage.app",messagingSenderId:"1068489135368",appId:"1:1068489135368:web:d7dac2089943ec2d3288bd"}),s=(0,l.aU)(i),n=(0,o.xI)(i)},2227:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var r=a(5155),l=a(2115),o=a(5317),i=a(1304),s=a(4509),n=a(4752),d=a.n(n);function c(e){let{isOpen:t,onClose:a,onSubmit:s,onDelete:n,initialData:c}=e,[u,m]=(0,l.useState)((null==c?void 0:c.Nombre)||""),[h,b]=(0,l.useState)((null==c?void 0:c.Capitulo)||0),[x,p]=(0,l.useState)((null==c?void 0:c.Imagen)||""),[g,f]=(0,l.useState)((null==c?void 0:c.Dia)||""),[v,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c?(m(c.Nombre),b(c.Capitulo),p(c.Imagen||""),f(c.Dia)):(m(""),b(0),p(""),f(""))},[c]),(0,l.useEffect)(()=>{if(x){let e=new Image;e.src=x,e.onload=()=>w(!0),e.onerror=()=>w(!1)}else w(!1)},[x]);let j=async()=>{if((await d().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",color:"#fff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",background:"#2b2b2b"})).isConfirmed)try{let e=(0,o.H9)(i.db,"Manhwas",(null==c?void 0:c.id)||"");await (0,o.kd)(e),d().fire("\xa1Eliminado!","El manhwa ha sido eliminado correctamente.","success"),n((null==c?void 0:c.id)||""),a()}catch(e){console.error("Error al eliminar el manhwa:",e),d().fire("Error","Hubo un problema al eliminar el manhwa.","error")}};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-blue-900 text-white p-6 rounded shadow-lg w-[600px] relative flex",children:[(0,r.jsx)("button",{onClick:a,className:"absolute top-2 right-2 text-gray-400 hover:text-white",children:"âœ•"}),(0,r.jsxs)("div",{className:"w-2/3 pr-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:c?"Editar Manhwa":"Crear Manhwa"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s({id:null==c?void 0:c.id,Nombre:u,Capitulo:h,Imagen:x,Dia:g})},children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium mb-2",children:"Nombre"}),(0,r.jsx)("input",{type:"text",id:"nombre",value:u,onChange:e=>m(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"capitulo",className:"block text-sm font-medium mb-2",children:"Cap\xedtulo"}),(0,r.jsx)("input",{type:"number",id:"capitulo",value:h,onChange:e=>b(Number(e.target.value)),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"imagen",className:"block text-sm font-medium mb-2",children:"Imagen (URL)"}),(0,r.jsx)("input",{type:"text",id:"imagen",value:x,onChange:e=>p(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),!v&&x&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:"La URL de la imagen no es v\xe1lida."})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"dia",className:"block text-sm font-medium mb-2",children:"D\xeda"}),(0,r.jsxs)("select",{id:"dia",value:g,onChange:e=>f(e.target.value),className:"w-full p-2 rounded bg-blue-950 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Selecciona un d\xeda"}),(0,r.jsx)("option",{value:"Lunes",children:"Lunes"}),(0,r.jsx)("option",{value:"Martes",children:"Martes"}),(0,r.jsx)("option",{value:"Mi\xe9rcoles",children:"Mi\xe9rcoles"}),(0,r.jsx)("option",{value:"Jueves",children:"Jueves"}),(0,r.jsx)("option",{value:"Viernes",children:"Viernes"}),(0,r.jsx)("option",{value:"S\xe1bado",children:"S\xe1bado"}),(0,r.jsx)("option",{value:"Domingo",children:"Domingo"})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-700 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded ",children:c?"Guardar Cambios":"Crear"})]}),c&&(0,r.jsx)("button",{onClick:j,className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded mt-4",children:"Eliminar"})]}),v&&(0,r.jsx)("div",{className:"w-1/3 flex justify-center items-center mb-9 ml-5",children:(0,r.jsx)("div",{className:"border rounded-lg shadow-md text-white w-70",children:(0,r.jsx)("div",{className:"w-full h-72 flex justify-center items-center overflow-hidden",children:(0,r.jsx)("img",{src:x,alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full rounded-lg"})})})}),!v&&(0,r.jsx)("div",{className:"w-1/3 flex justify-center items-center mb-9 ml-5",children:(0,r.jsx)("div",{className:"border rounded-lg shadow-md text-white w-70",children:(0,r.jsx)("div",{className:"w-full h-72 flex justify-center items-center overflow-hidden",children:(0,r.jsx)("img",{src:"../default.png",alt:"Previsualizaci\xf3n",className:"object-cover w-full h-full rounded-lg"})})})})]})}):null}var u=a(7596),m=a(2596),h=a(7472),b=a(7582),x=a(3209),p=a(5170),g=a(306);function f(e){return(0,g.Ay)("MuiFab",e)}let v=(0,p.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var w=a(9287),j=a(955),N=a(680),y=a(8963),C=a(2204);let k=e=>{let{color:t,variant:a,classes:r,size:l}=e,o={root:["root",a,"size".concat((0,x.A)(l)),"inherit"===t?"colorInherit":t]},i=(0,h.A)(o,f,r);return{...r,...i}},S=(0,j.Ay)(b.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,w.A)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],t["size".concat((0,x.A)(a.size))],"inherit"===a.color&&t.colorInherit,t[(0,x.A)(a.size)],t[a.color]]}})((0,N.A)(e=>{var t,a;let{theme:r}=e;return{...r.typography.button,minHeight:36,transition:r.transitions.create(["background-color","box-shadow","border-color"],{duration:r.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(r.vars||r).zIndex.fab,boxShadow:(r.vars||r).shadows[6],"&:active":{boxShadow:(r.vars||r).shadows[12]},color:r.vars?r.vars.palette.grey[900]:null==(t=(a=r.palette).getContrastText)?void 0:t.call(a,r.palette.grey[300]),backgroundColor:(r.vars||r).palette.grey[300],"&:hover":{backgroundColor:(r.vars||r).palette.grey.A100,"@media (hover: none)":{backgroundColor:(r.vars||r).palette.grey[300]},textDecoration:"none"},["&.".concat(v.focusVisible)]:{boxShadow:(r.vars||r).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),(0,N.A)(e=>{let{theme:t}=e;return{variants:[...Object.entries(t.palette).filter((0,y.A)(["dark","contrastText"])).map(e=>{let[a]=e;return{props:{color:a},style:{color:(t.vars||t).palette[a].contrastText,backgroundColor:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:(t.vars||t).palette[a].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a].main}}}}})]}}),(0,N.A)(e=>{let{theme:t}=e;return{["&.".concat(v.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),A=l.forwardRef(function(e,t){let a=(0,C.b)({props:e,name:"MuiFab"}),{children:l,className:o,color:i="default",component:s="button",disabled:n=!1,disableFocusRipple:d=!1,focusVisibleClassName:c,size:u="large",variant:h="circular",...b}=a,x={...a,color:i,component:s,disabled:n,disableFocusRipple:d,size:u,variant:h},p=k(x);return(0,r.jsx)(S,{className:(0,m.A)(p.root,o),component:s,disabled:n,focusRipple:!d,focusVisibleClassName:(0,m.A)(p.focusVisible,c),ownerState:x,ref:t,...b,classes:p,children:l})}),I=(0,a(7515).A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");function z(){(0,u.A)();let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("uid");if(!e)return console.error("No hay UID en localStorage");try{let a=(0,o.P)((0,o.rJ)(i.db,"Manhwas"),(0,o._M)("User","==",e)),r=(await (0,o.GG)(a)).docs.map(e=>({id:e.id,...e.data()}));t(r)}catch(e){console.error("Error al obtener los manhwas:",e)}})()},[]);let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;m(e),n(!0)},b=()=>{m(null),n(!1)},x=async e=>{let a=localStorage.getItem("uid");if(!a)return void console.error("No hay UID en localStorage");try{if(e.id){let t=(0,o.H9)(i.db,"Manhwas",e.id);await (0,o.mZ)(t,{Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia}),console.log("Manhwa actualizado correctamente")}else await (0,o.gS)((0,o.rJ)(i.db,"Manhwas"),{Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia,User:a}),console.log("Manhwa creado correctamente");let r=(0,o.P)((0,o.rJ)(i.db,"Manhwas"),(0,o._M)("User","==",a)),l=(await (0,o.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));t(l),b()}catch(e){console.error("Error al guardar el manhwa:",e)}},p=(e,a)=>{t(t=>t.map(t=>t.id===e?{...t,Capitulo:a}:t))},g=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo","Sin d\xeda"],f=e.reduce((e,t)=>{let a=t.Dia||"Sin d\xeda";return e[a]||(e[a]=[]),e[a].push(t),e},{}),v=Object.keys(f).sort((e,t)=>g.indexOf(e)-g.indexOf(t));return(0,r.jsxs)("div",{className:"p-5 relative",children:[(0,r.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 text-center sm:text-left",children:"Manhwas"}),(0,r.jsx)("div",{className:"border-b-2 border-gray-500 mb-6"}),v.map(e=>(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:e}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:f[e].map(e=>(0,r.jsx)(s.A,{id:e.id,Nombre:e.Nombre,Capitulo:e.Capitulo,Imagen:e.Imagen,Dia:e.Dia,onEdit:()=>h(e),onUpdateChapter:p},e.id))})]},e)),(0,r.jsx)(A,{color:"primary","aria-label":"add",onClick:()=>h(null),style:{position:"fixed",bottom:"20px",right:"20px"},children:(0,r.jsx)(I,{})}),(0,r.jsx)(c,{isOpen:a,onClose:b,onSubmit:x,onDelete:e=>{t(t=>t.filter(t=>t.id!==e))},initialData:d})]})}},3713:(e,t,a)=>{Promise.resolve().then(a.bind(a,2227))},4509:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(5155),l=a(5317),o=a(1304),i=a(9521),s=a(8464),n=a(5712);function d(e){let{id:t,Nombre:a,Capitulo:d,Imagen:c,Dia:u,onEdit:m,onUpdateChapter:h}=e,b=async e=>{try{let a=(0,l.H9)(o.db,"Manhwas",t);await (0,l.mZ)(a,{Capitulo:e}),console.log("Cap\xedtulo actualizado a ".concat(e)),h(t,e)}catch(e){console.error("Error al actualizar el cap\xedtulo:",e)}};return(0,r.jsxs)("div",{className:"border border-stone-400 rounded-lg p-4 shadow-md flex flex-col items-center bg-blue-900 text-white w-full sm:w-64",children:[(0,r.jsx)("div",{className:"w-full h-80 sm:h-80 flex justify-center items-center overflow-hidden",children:(0,r.jsx)("img",{src:c||"../default.png",alt:a,className:"border border-stone-400 rounded-lg object-cover w-full h-full"})}),(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-bold mt-4 text-center cursor-pointer hover:text-blue-300 truncate w-full",onClick:m,title:a,children:a}),(0,r.jsx)("p",{className:"text-lg sm:text-xl text-gray-300 text-center mt-2",children:d}),(0,r.jsxs)("div",{className:"flex gap-2 sm:gap-4 mt-4",children:[(0,r.jsx)(i.A,{onClick:()=>b(d-1),color:"primary",size:"large",children:(0,r.jsx)(s.A,{fontSize:"inherit"})}),(0,r.jsx)(i.A,{onClick:()=>b(d+1),color:"primary",size:"large",children:(0,r.jsx)(n.A,{fontSize:"inherit"})})]})]})}},7596:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5695),l=a(2115);let o=()=>{let e=(0,r.useRouter)();(0,l.useEffect)(()=>{localStorage.getItem("uid")||e.push("/login")},[e])}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,118,320,708,515,807,441,684,358],()=>t(3713)),_N_E=e.O()}]);